<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agente de Investigaci√≥n Cl√≠nica de Oftalmolog√≠a | IA M√©dica</title>
    <meta name="description" content="Herramienta de IA especializada en investigaci√≥n cl√≠nica oftalmol√≥gica. An√°lisis basado en evidencia m√©dica con validaci√≥n autom√°tica de fuentes." />
    <meta name="keywords" content="oftalmolog√≠a, IA m√©dica, investigaci√≥n cl√≠nica, diagn√≥stico diferencial, evidencia m√©dica, validaci√≥n autom√°tica" />
    <meta name="author" content="4 ailabs" />
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Agente de Investigaci√≥n Cl√≠nica de Oftalmolog√≠a" />
    <meta property="og:description" content="Herramienta de IA especializada en investigaci√≥n cl√≠nica oftalmol√≥gica con validaci√≥n m√©dica autom√°tica." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://agente-oftalmologia.vercel.app" />
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Agente de Investigaci√≥n Cl√≠nica de Oftalmolog√≠a" />
    <meta name="twitter:description" content="Herramienta de IA especializada en investigaci√≥n cl√≠nica oftalmol√≥gica." />
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#3b82f6" />
    
    <!-- PWA Support -->
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Agente Oftalmolog√≠a">
    <link rel="apple-touch-icon" href="/icon-192.png">
    
    <!-- Robots -->
    <meta name="robots" content="index, follow" />
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              'sans': ['Inter', 'system-ui', 'sans-serif'],
            },
          }
        }
      }
    </script>
    
    <script type="importmap">
{
  "imports": {
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.19.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "react-markdown": "https://aistudiocdn.com/react-markdown@^9.0.1",
    "remark-gfm": "https://aistudiocdn.com/remark-gfm@^4.0.0"
  }
}
</script>
</head>
  <body class="bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20 text-slate-800 font-sans antialiased">
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
    
    <!-- Service Worker Registration -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then(registration => {
              console.log('SW: Service Worker registered successfully', registration);
              
              // Check for updates
              registration.addEventListener('updatefound', () => {
                const newWorker = registration.installing;
                newWorker.addEventListener('statechange', () => {
                  if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                    // New content available, show update notification
                    if (confirm('Nueva versi√≥n disponible. ¬øActualizar ahora?')) {
                      window.location.reload();
                    }
                  }
                });
              });
            })
            .catch(error => {
              console.log('SW: Service Worker registration failed', error);
            });
        });

        // Handle PWA install prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
          e.preventDefault();
          deferredPrompt = e;
          
          // Show custom install button after a delay
          setTimeout(() => {
            if (deferredPrompt && !window.matchMedia('(display-mode: standalone)').matches) {
              showInstallPrompt();
            }
          }, 10000); // Show after 10 seconds
        });

        function showInstallPrompt() {
          const installBanner = document.createElement('div');
          installBanner.innerHTML = `
            <div style="
              position: fixed;
              bottom: 20px;
              left: 20px;
              right: 20px;
              background: linear-gradient(135deg, #3b82f6, #6366f1);
              color: white;
              padding: 16px;
              border-radius: 16px;
              box-shadow: 0 10px 25px rgba(0,0,0,0.2);
              z-index: 1000;
              display: flex;
              align-items: center;
              justify-content: space-between;
              max-width: 400px;
              margin: 0 auto;
              animation: slideUp 0.3s ease-out;
            ">
              <div style="flex: 1; margin-right: 16px;">
                <div style="font-weight: 600; font-size: 14px; margin-bottom: 4px;">üì± Instalar App</div>
                <div style="font-size: 12px; opacity: 0.9;">Acceso r√°pido desde tu pantalla de inicio</div>
              </div>
              <div>
                <button onclick="installApp()" style="
                  background: rgba(255,255,255,0.2);
                  border: none;
                  color: white;
                  padding: 8px 16px;
                  border-radius: 8px;
                  font-size: 12px;
                  font-weight: 500;
                  cursor: pointer;
                  margin-right: 8px;
                ">Instalar</button>
                <button onclick="this.parentElement.parentElement.parentElement.remove()" style="
                  background: none;
                  border: none;
                  color: white;
                  padding: 8px;
                  border-radius: 8px;
                  font-size: 16px;
                  cursor: pointer;
                  opacity: 0.7;
                ">‚úï</button>
              </div>
            </div>
            <style>
              @keyframes slideUp {
                from { transform: translateY(100%); opacity: 0; }
                to { transform: translateY(0); opacity: 1; }
              }
            </style>
          `;
          
          document.body.appendChild(installBanner);
          
          window.installApp = () => {
            if (deferredPrompt) {
              deferredPrompt.prompt();
              deferredPrompt.userChoice.then((choiceResult) => {
                deferredPrompt = null;
                installBanner.remove();
              });
            }
          };
        }
      }
    </script>
  </body>
</html>